{"version":3,"file":"device.js","sources":["../../src/libs/device.ts"],"sourcesContent":["/**\n * Device detection utility — mobile vs desktop, OS type, screen size, model.\n * Pure functions, no dependencies. Use in preview or project apps.\n */\n\nexport type DeviceOs = 'iphone' | 'ipad' | 'android' | 'desktop' | 'unknown'\n\nexport interface ScreenSize {\n  width: number\n  height: number\n}\n\nexport interface DeviceInfo {\n  /** Mobile phone/tablet vs desktop */\n  isMobile: boolean\n  /** Device type: iPhone, iPad, Android, Desktop or Unknown */\n  os: DeviceOs\n  /** Screen resolution (screen.width / screen.height) */\n  screen: ScreenSize\n  /** Current viewport (innerWidth / innerHeight) at call time */\n  viewport: ScreenSize\n  /** Device model if detectable (e.g. \"Pixel 7\", \"SM-G998B\"), null otherwise */\n  model: string | null\n}\n\nconst MOBILE_UA =\n  /Mobile|Android|iPhone|iPad|iPod|webOS|BlackBerry|IEMobile|Opera Mini/i\nconst ANDROID_MODEL = /Android\\s+[\\d.]+;\\s*([^)]+)/\n\ninterface NavigatorUAData {\n  mobile?: boolean\n}\n\nfunction detectIsMobile(): boolean {\n  if (typeof window === 'undefined') return false\n  const ua = navigator.userAgent\n  const uaData = (navigator as Navigator & { userAgentData?: NavigatorUAData }).userAgentData\n  if (uaData?.mobile !== undefined) {\n    return uaData.mobile\n  }\n  if (typeof window.matchMedia === 'function' && window.matchMedia('(pointer:coarse)').matches) {\n    return true\n  }\n  return MOBILE_UA.test(ua)\n}\n\nfunction detectOs(ua: string, isMobile: boolean): DeviceOs {\n  if (/iPhone|iPod/i.test(ua)) return 'iphone'\n  if (/iPad/i.test(ua)) return 'ipad'\n  // iPad on iOS 13+ reports as Mac — check touch + Mac UA\n  if (/Macintosh/i.test(ua) && typeof navigator !== 'undefined' && navigator.maxTouchPoints > 1)\n    return 'ipad'\n  if (/Android/i.test(ua)) return 'android'\n  if (!isMobile) return 'desktop'\n  return 'unknown'\n}\n\nfunction detectModel(ua: string, os: DeviceOs): string | null {\n  if (os === 'android') {\n    const m = ua.match(ANDROID_MODEL)\n    if (m?.[1]) return m[1].trim()\n  }\n  return null\n}\n\n/**\n * Returns device info: mobile/desktop, OS type, screen size, viewport, model.\n */\nexport function getDeviceInfo(): DeviceInfo {\n  const isMobile = detectIsMobile()\n  const ua = typeof navigator !== 'undefined' ? navigator.userAgent : ''\n  const os = detectOs(ua, isMobile)\n  const model = detectModel(ua, os)\n\n  const screen: ScreenSize =\n    typeof window !== 'undefined'\n      ? { width: window.screen.width, height: window.screen.height }\n      : { width: 0, height: 0 }\n\n  const viewport: ScreenSize =\n    typeof window !== 'undefined'\n      ? { width: window.innerWidth, height: window.innerHeight }\n      : { width: 0, height: 0 }\n\n  return {\n    isMobile,\n    os,\n    screen,\n    viewport,\n    model,\n  }\n}\n\n/**\n * Returns true if the device is mobile (phone/tablet), false for desktop.\n */\nexport function isMobileDevice(): boolean {\n  return getDeviceInfo().isMobile\n}\n"],"names":[],"mappings":"AAyBA,MAAM,YACJ;AACF,MAAM,gBAAgB;AAMtB,SAAS,iBAA0B;AACjC,MAAI,OAAO,WAAW,YAAa,QAAO;AAC1C,QAAM,KAAK,UAAU;AACrB,QAAM,SAAU,UAA8D;AAC9E,MAAI,QAAQ,WAAW,QAAW;AAChC,WAAO,OAAO;AAAA,EAChB;AACA,MAAI,OAAO,OAAO,eAAe,cAAc,OAAO,WAAW,kBAAkB,EAAE,SAAS;AAC5F,WAAO;AAAA,EACT;AACA,SAAO,UAAU,KAAK,EAAE;AAC1B;AAEA,SAAS,SAAS,IAAY,UAA6B;AACzD,MAAI,eAAe,KAAK,EAAE,EAAG,QAAO;AACpC,MAAI,QAAQ,KAAK,EAAE,EAAG,QAAO;AAE7B,MAAI,aAAa,KAAK,EAAE,KAAK,OAAO,cAAc,eAAe,UAAU,iBAAiB;AAC1F,WAAO;AACT,MAAI,WAAW,KAAK,EAAE,EAAG,QAAO;AAChC,MAAI,CAAC,SAAU,QAAO;AACtB,SAAO;AACT;AAEA,SAAS,YAAY,IAAY,IAA6B;AAC5D,MAAI,OAAO,WAAW;AACpB,UAAM,IAAI,GAAG,MAAM,aAAa;AAChC,QAAI,IAAI,CAAC,UAAU,EAAE,CAAC,EAAE,KAAA;AAAA,EAC1B;AACA,SAAO;AACT;AAKO,SAAS,gBAA4B;AAC1C,QAAM,WAAW,eAAA;AACjB,QAAM,KAAK,OAAO,cAAc,cAAc,UAAU,YAAY;AACpE,QAAM,KAAK,SAAS,IAAI,QAAQ;AAChC,QAAM,QAAQ,YAAY,IAAI,EAAE;AAEhC,QAAM,SACJ,OAAO,WAAW,cACd,EAAE,OAAO,OAAO,OAAO,OAAO,QAAQ,OAAO,OAAO,OAAA,IACpD,EAAE,OAAO,GAAG,QAAQ,EAAA;AAE1B,QAAM,WACJ,OAAO,WAAW,cACd,EAAE,OAAO,OAAO,YAAY,QAAQ,OAAO,gBAC3C,EAAE,OAAO,GAAG,QAAQ,EAAA;AAE1B,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;AAKO,SAAS,iBAA0B;AACxC,SAAO,gBAAgB;AACzB;"}